<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>zoreet - guilt-free to-do app</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />

    <!-- favicon stuff -->
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/static/img/favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/static/img/favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/static/img/favicon/favicon-16x16.png"
    />
    <link rel="manifest" href="/static/img/favicon/site.webmanifest" />
    <link
      rel="mask-icon"
      href="/static/img/favicon/safari-pinned-tab.svg"
      color="#2be4a4"
    />
    <link rel="shortcut icon" href="/static/img/favicon/favicon.ico" />
    <meta name="msapplication-TileColor" content="#0d0106" />
    <meta
      name="msapplication-config"
      content="/static/img/favicon/browserconfig.xml"
    />
    <meta name="theme-color" content="#2be4a4" />

    <!-- Facebook sharing stuff -->
    <meta property="og:image:width" content="279" />
    <meta property="og:image:height" content="279" />
    <meta property="og:title" content="zoreet - guilt-free to-do app" />
    <meta
      property="og:description"
      content="focus what you can achieve today. plan ahead, let go of unfinished tasks and celebrate your achievements."
    />
    <meta property="og:url" content="http://zoreet.com" />
    <meta
      property="og:image"
      content="http://zoreet.com/static/img/favicon/facebook.png/og-image.jpg"
    />

    <style>
      body.loading {
        pointer-events: none;
      }

      body.loading:before {
        background: #dedede;
        content: '';
        display: block;
        height: 100vh;
        line-height: 100vh;
        position: fixed;
        text-align: center;
        width: 100vw;
        z-index: 999;
      }

      body.loading:after {
        animation: rotate 0.8s infinite linear;
        border: 8px solid;
        border-radius: 50%;
        border-right-color: transparent;
        content: '';
        display: block;
        height: 28px;
        left: 50%;
        margin: -14px 0 0 -14px;
        position: absolute;
        top: 50%;
        width: 28px;
        z-index: 999;
      }

      @keyframes rotate {
        0% {
          transform: rotate(0deg);
        }

        100% {
          transform: rotate(360deg);
        }
      }

    </style>

    <link rel="dns-prefetch" href="https://todayapp.eu.auth0.com/" />
  </head>

  <body class="loading">
    <link
      rel="stylesheet"
      type="text/css"
      media="all"
      href="/static/css/app.css?v=2.2"
    />
    <link
      rel="stylesheet"
      type="text/css"
      media="(min-width: 1025px)"
      href="/static/css/app-desktop.css?v=2.2"
    />
    <img
      id="screenshot"
      src="/static/img/Mobile%20-%20App%20-%20Light.png"
      width="375"
      height="821"
      style="position: fixed;z-index: 999;top: -44px; opacity: 0.2;filter: invert(1); pointer-events: none; display: none"
    />
    <div id="app" :class="{'show-menu': showMenu}" v-cloak>
      <div id="menu" class="pannel">
        <a href="/" class="pannel--header">
          <h1><strong>zoreet</strong>.com</h1>
          <div class="subtitle">Guilt-free To-Do List</div>
        </a>
        <div class="pannel--content">
          <section id="jump" class="section">
            <div class="buttons">
              <a
                id="yesterday"
                href="#"
                class="button"
                @click.prevent="jumpToYesterday"
                >Yesterday</a
              >

              <a id="today" href="#" class="button" @click.prevent="jumpToToday"
                >Today</a
              >

              <a
                id="tomorrow"
                href="#"
                class="button"
                @click.prevent="jumpToTomorrow"
                >Tomorrow</a
              >
            </div>
            <month :date="date" :today="today" @jump-to-day="jumpToDay"></month>
          </section>
          <section id="report" class="section">
            <h2>Report</h2>
            <a href="/report.html" class="button">This quarter</a>
          </section>
          <section id="user" class="section">
            <div id="user--email">{{ user.email }}</div>
            <a href="#" class="button" @click.prevent="logout">Log out</a>
          </section>
        </div>
      </div>
      <div id="editor" class="pannel">
        <div id="close-menu" v-if="showMenu" @click.prevent="toggleMenu"></div>
        <div class="pannel--header">
          <a id="open-menu" href="#menu" @click.prevent="toggleMenu"></a>
          <div class="date-subtitle">{{ dateSubtitle }}</div>
          <h3 class="date-title">{{ dateTitle }}</h3>
        </div>
        <div class="pannel--content" :class="{'in-the-past': inThePast}">
          <div class="errors">
            <div class="error error--offline" v-if="!online">
              <strong>damn! you're offline.</strong> zoreet requires an internet
              connection to work :(
            </div>
            <div class="error" v-if="error">
              <strong>error: </strong> {{ error }}
            </div>
          </div>

          <!-- If in the past show done tasks first -->
          <h4
            class="tasks-title"
            v-if="doneTasks.length && inThePast"
            v-html="doneTasksTitle"
          ></h4>
          <div class="todos" v-if="inThePast">
            <draggable
              v-model="tasks"
              @end="saveTasks"
              :options="{handle: '.task'}"
            >
              <task
                v-for="(task, index) in doneTasks"
                :key="task.id"
                :task="task"
                :last="index == (tasks.length - 1)"
                @toggle-task="sortTasks"
                @done-edit="saveTasks"
                @done-edit-with-enter="addTaskAtIndex(index)"
                @remove-task="removeTask(index)"
                :autofocus="index == focusedIndex"
              ></task>
            </draggable>
            <newtask @add-done-task="addDoneTask" :done="inThePast"></newtask>
          </div>

          <!-- Unfinished tasks -->
          <h4
            class="tasks-title"
            v-html="unfinishedTasksTitle"
            v-if="unfinishedTasks.length || !inThePast"
          ></h4>
          <div class="todos">
            <draggable
              v-model="tasks"
              @end="saveTasks"
              :options="{handle: '.task'}"
            >
              <task
                v-for="(task, index) in unfinishedTasks"
                :key="task.id"
                :task="task"
                :last="index == (tasks.length - 1)"
                @toggle-task="sortTasks"
                @done-edit="saveTasks"
                @done-edit-with-enter="addTaskAtIndex(index)"
                @remove-task="removeTask(index)"
                :autofocus="index == focusedIndex"
              ></task>
            </draggable>
            <newtask
              @add-task="addTask"
              @add-done-task="addDoneTask"
              v-if="!inThePast "
            ></newtask>
          </div>

          <!-- If today/future show done tasks last -->
          <h4
            class="tasks-title"
            v-if="doneTasks.length && !inThePast"
            v-html="doneTasksTitle"
          ></h4>
          <div class="todos" v-if="!inThePast">
            <draggable
              v-model="tasks"
              @end="saveTasks"
              :options="{handle: '.task'}"
            >
              <task
                v-for="(task, index) in doneTasks"
                :key="task.id"
                :task="task"
                :last="index == (tasks.length - 1)"
                @toggle-task="sortTasks"
                @done-edit="saveTasks"
                @done-edit-with-enter="addTaskAtIndex(index)"
                @remove-task="removeTask(index)"
                :autofocus="index == focusedIndex"
              ></task>
            </draggable>
          </div>
        </div>
      </div>
    </div>
    <script src="/static/js/app/vue.js"></script>
    <script src="https://cdn.auth0.com/js/auth0/9.5.1/auth0.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="static/js/app/moment.min.js"></script>
    <!-- CDNJS :: Sortable (https://cdnjs.com/) -->
    <script src="//cdn.jsdelivr.net/npm/sortablejs@1.7.0/Sortable.min.js"></script>
    <!-- CDNJS :: Vue.Draggable (https://cdnjs.com/) -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/Vue.Draggable/2.17.0/vuedraggable.min.js"></script>
    <script src="/static/js/app/app.js?v=2.2"></script>
  </body>
</html>
